
# 项目打包指南 (Windows)

本文档为希望将本项目打包成独立 Windows 可执行程序 (`.exe`) 的开发者提供指导。

项目内已包含完整的打包脚本 (`install.bat`) 和 `PyInstaller` 配置文件 (`.spec`)。开发者无需自行配置，只需确保环境正确并执行脚本即可。

## 打包流程概述

本项目的打包过程通过 `install.bat` 脚本全自动完成，主要包含两个核心步骤：

1.  **构建主应用**: 将所有 Python 源代码和依赖项打包成一个单文件的 `KLineTrainer.exe`。
2.  **构建安装器**: 将 `KLineTrainer.exe` 和其他必要的资源（如数据文件夹结构）再次打包，生成一个最终的用户友好型安装程序。

## 准备工作

在运行打包脚本前，请确保你的环境满足以下条件：

1.  **操作系统**: Windows。

2.  **Python 环境**:
    *   你已经创建了一个 Python 虚拟环境来管理项目依赖。
    *   **重要**: 脚本默认的虚拟环境路径是 `.venv`。如果你的虚拟环境文件夹名称不同（例如 `my_env`），请**手动编辑 `install.bat` 文件**，将所有出现的 `.venv` 替换为你的虚拟环境文件夹名。

3.  **安装依赖**:
    *   首先，激活你的 Python 虚拟环境。例如，如果你的环境名为 `.venv`，在项目根目录运行：
        ```bash
        .\.venv\Scripts\activate
        ```
    *   然后，安装 `PyInstaller` 这个打包工具：
        ```bash
        pip install pyinstaller
        ```
    *   确保项目运行所需的其他库（如 `flask`, `pywebview` 等）也已安装。

## 执行打包

完成准备工作后，打包过程非常简单：

1.  **打开命令行工具**: 在项目的根目录下，打开一个cmd命令行终端。

2.  **运行打包脚本**: 直接执行 `install.bat` 脚本。
    ```bash
    .\install.bat
    ```

3.  **等待脚本执行**: 脚本会自动执行所有打包步骤。如果一切顺利，你会看到 "所有操作已成功完成！" 的提示。如果中途发生错误，脚本会暂停并显示错误信息，方便你进行排查。

## 获取最终产物

打包成功后，最终生成的可供分发的安装程序位于以下路径：

```
<项目根目录>\installer_source\dist\
```

你可以在这个目录里找到最终的 `.exe` 安装文件。将这个文件执行就可以像安装普通软件一样安装并使用你的“A股K线复盘训练”应用了。
